# REST Endpoints

> ⚠ The endpoints of the ELCM are not expected to be exposed to the Internet and may leak information. For user
> management and authorization always use a different front-end, such as the Dispatcher.

## Experiment management endpoints

### [POST] `/elcm/api/v1/experiment/run`
> *[POST] `/api/v0/run` (Deprecated)*

Creates and queues a new experiment execution, based on the contents of the received Experiment Descriptor (JSON). 
Replies with the following response JSON:
```text
{ “ExecutionId”: <id> }
```
Where <id> is a unique execution identification that can be used as input in other endpoints.

### [GET] `/elcm/api/v1/execution/<id>/status`
> *[GET] `/elcm/api/v1/execution/<id>/json` (Deprecated)*

Returns a JSON that contains general information about the status of the selected execution id, with the following
format:
```text
{ “Coarse”: <Global status or current stage of execution>,
  “Status”: <Global status or status within the current stage>,
  “PerCent”: <Percentage of completion of current stage>,
  “Messages”: <List of global messages generated by the execution>,
  “Verdict”: <Current or final verdict of the execution> }
```

### [GET] `/elcm/api/v1/execution/<id>/logs`

Returns a JSON that contains all the log messages generated by the execution, separated by stage:
```text
{ “Status”: <Either “Success” or “Not Found”>,
  “PreRun”: <Messages generated during Pre-Run stage>,
  “Executor”: <Messages generated during the Run stage>,
  “PostRun”: <Messages generated during Post-Run stage> }
```

### [GET] `/elcm/api/v1/execution/<id>/results`

Returns a compressed file that includes the logs and all files generated by the experiment execution.

### [GET] `/elcm/api/v1/execution/<id>/descriptor`

Returns a copy of the Experiment Descriptor that was used to define the execution.

### [GET] `/elcm/api/v1/execution/<id>/kpis`

Returns a dictionary with a single `KPIs` key, containing a list of objects that describe KPIs that are considered of
interest. The objects have the following format:

```text
{ 
    "Measurement": <Measurement (table) name>,
    "KPI": <KPI name>,
    "Type": <KPI group, may be an empty string>,
    "Description": <Description of the KPI, may be an empty string>
}
```

> These values can be used as part of queries to the [Analytics Module](https://github.com/5genesis/Analytics), in order
> to extract a sub-set of important KPIs from all the generated measurements.

### [DELETE] `/elcm/api/v1/execution/<id>`
> *[GET] `/elcm/api/v1/execution/<id>/cancel` (Deprecated)*

Marks the selected execution for cancellation. The execution will be cancelled after finalization of the current task.

## Facility information

### [GET] `/elcm/api/v1/facility/baseSliceDescriptors`

Returns a list of available Base Slice Descriptors, with the following format:
```json
{ "SliceDescriptors": [] }
```

### [GET] `/elcm/api/v1/facility/testcases`

Returns a list of available UEs, with the following format:
```text
{
  "TestCases": [
    {
      "Name": <Name of the TestCase>,
      "Distributed": <Boolean>,
      "Standard": <Boolean, indicates if the experiment can be executed without additional parameters>,
      "PublicCustom": <Boolean, indicates if the experiment can be customized by any user>,
      "PrivateCustom": <List of emails, of the users allowed to customize the experiment>,
      "Parameters": <List of configurable parameters of the experiment>
    }, ...
  ]
}
```

### [GET] `/elcm/api/v1/facility/ues`

Returns a list of available UEs, with the following format:
```json
{ "UEs": [] }
```

### [GET] `/elcm/api/v1/facility/resource_status`

Returns a list of available Resources, separated by current usage status:
```json
{ "Busy": [],
  "Idle": [] }
```

### [GET] `/elcm/api/v1/facility/scenarios`

Returns a list of available Scenarios, with the following format:
```json
{ "Scenarios": [] }
```
